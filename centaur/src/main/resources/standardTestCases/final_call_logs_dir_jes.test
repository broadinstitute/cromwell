# Tests that a runtime option to save call logs is copying said logs appropriately.

name: final_call_logs_dir_jes
backends: [Papi]

testFormat: workflowsuccess

files {
  workflow: final_call_logs_dir/final_call_logs_dir.wdl
  options: final_call_logs_dir/final_call_logs_dir_jes.options
}

fileSystemCheck: "gcs"
outputExpectations {
  "gs://cloud-cromwell-dev-self-cleaning/callLogs/wf_hello/<<UUID>>/call-hello/attempt-1/stdout": 1
  "gs://cloud-cromwell-dev-self-cleaning/callLogs/wf_hello/<<UUID>>/call-hello/attempt-1/stderr": 1
  "gs://cloud-cromwell-dev-self-cleaning/callLogs/wf_hello/<<UUID>>/call-hello/attempt-1/hello.log": 1
  "gs://cloud-cromwell-dev-self-cleaning/workflowLogDir/workflow.<<UUID>>.log": 1
  "gs://cloud-cromwell-dev-self-cleaning/outputs/wf_hello/<<UUID>>/call-hello/attempt-1/test.out": 1
  "gs://cloud-cromwell-dev-self-cleaning/outputs/wf_hello/<<UUID>>/call-hello/attempt-1/array.out": 1
  "gs://cloud-cromwell-dev-self-cleaning/outputs/wf_hello/<<UUID>>/call-hello/attempt-1/map.out": 1
  "gs://cloud-cromwell-dev-self-cleaning/outputs/wf_hello/<<UUID>>/call-hello/attempt-1/left.out": 1
  "gs://cloud-cromwell-dev-self-cleaning/outputs/wf_hello/<<UUID>>/call-hello/attempt-1/right.out": 1
}
