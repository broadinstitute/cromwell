webservice {
  port = 8000
  interface = 0.0.0.0
  instance.name = "reference"
}

akka {
  loggers = ["akka.event.slf4j.Slf4jLogger"]
}

spray.can {
  server {
    request-timeout = 40s
  }
  client {
    request-timeout = 40s
    connecting-timeout = 40s
  }
}

workflow-options {
  // These workflow options will be encrypted when stored in the database
  encrypted-fields: []

  // AES-256 key to use to encrypt the values in `encrypted-fields`
  base64-encryption-key: "AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA="
}

// Optional Dockerhub Credentials. Can be used to access private docker images.
// Note: Works currently only on JES backend
docker {
  // dockerAccount = ""
  // dockerToken = ""
}

backend {
  // Either "jes", "local", or "sge" (case insensitive)
  backend = "local"

  // If backend is JES, must supply a 'jes' stanza:
  jes {
    // applicationName = ""
    // project = ""
    // baseExecutionBucket = ""
    // endpointUrl = ""

    // Polling for completion backs-off gradually for slower-running jobs.
    // This is the maximum polling interval (in seconds):
    // maximumPollingInterval = 600
  }

  // For any backend that assumes a local filesystem (local, sge)
  shared-filesystem {
    // Root directory where Cromwell writes job results to.  This directory must be
    // visible and writeable to the Cromwell process as well as the jobs that Cromwell
    // launches
    root: "cromwell-executions"

    // Cromwell makes a link to your input files within <root>/<workflow UUID>/workflow-inputs
    // The following are strategies used to make those links.  They are ordered.  If one fails
    // The next one is tried:
    //
    // hard-link: attempt to create a hard-link to the file
    // copy: copy the file
    // soft-link: create a symbolic link to the file
    //
    // NOTE: soft-link will be skipped for Docker jobs
    localization: [
      "hard-link", "soft-link", "copy"
    ]
  }
}

// If authenticating with Google (e.g. if backend is 'JES') you must supply a top level stanza 'google':
// This defines how all requests to JES/GCS performed by Cromwell will be authenticated.
google {
  // Used by cromwell to make calls to JES and to perform GCS reads/writes.
  // The latter can be overriden if the "User Mode" is used (see below).
  // authScheme = "user"

  // If authScheme is "user"
  userAuth {
    // user = ""
    // secretsFile = ""
    // dataStoreDir = ""
  }

  // If authScheme is "service"
  serviceAuth {
    // p12File = ""
    // serviceAccountId = ""
  }

  // User Mode [Optional]
  // If defined, most of the operations in GoogleCloudStorage will be done on behalf of another entity (typically a user).
  // In particular this allows cromwell to work with a bucket that wouldn't be accessible using whatever "authScheme" has been defined.
  // It requires a user refresh token to be passed upon every workflow submission (see "workflow options" in cromwell documentation).
  // client_id and client_secrets must be the ones that have been used to generate the above-mentioned refresh token.
  // localizeWithRefreshToken = {
  //   client_id = ""
  //   client_secret = ""
  // }
}

database {
  config = main.hsqldb

  main {
    hsqldb {
      db.url = "jdbc:hsqldb:mem:${slick.uniqueSchema};shutdown=false;hsqldb.tx=mvcc"
      db.driver = "org.hsqldb.jdbcDriver"
      driver = "slick.driver.HsqldbDriver$"
      slick.createSchema = true
    }
  }

  test {
    hsqldb {
      db.url = "jdbc:hsqldb:mem:testdb;shutdown=false;hsqldb.tx=mvcc"
      db.driver = "org.hsqldb.jdbcDriver"
      driver = "slick.driver.HsqldbDriver$"
      liquibase = {
        changelog = "src/main/migrations/changelog.xml"
        connection = "liquibase.database.jvm.HsqlConnection"
      }
    }

    mysql {
      db.url = "jdbc:mysql://localhost/cromwell_test"
      db.user = "travis"
      db.password = ""
      db.driver = "com.mysql.jdbc.Driver"
      driver = "slick.driver.MySQLDriver$"
      liquibase = {
        changelog = "src/main/migrations/changelog.xml"
      }
    }
  }
}


instrumentation {
  use-kamon = false
}

// Basic defaults for kamon configuration. There are a plethora of things which you can set, see the Kamon docs
// for more information. Note that at a minimum you'll need to fill in the "hostname" field below. Outside of hostname
// you should make sure you know what you're doing before overriding any of the rest of these
kamon {
  metric.filters {
    akka-dispatcher {
      includes = [ "**" ]
      excludes = [ ]
    }

    akka-actor {
      includes = [ "cromwell-system/user/**" ]
      excludes = [ "*/system/**", "*/user/IO-**", "*kamon*" ]
    }

    akka-router {
      includes = [ "**" ]
      excludes = []
    }
  }

  statsd {
    // If you're using Kamon instrumentation you'll want need to specify your hostname (and potentially port) where
    // your statsd is running. Remember that StatsD packets are sent using UDP and setting unreachable hosts and/or
    // not open ports wont be warned by the Kamon, your data wont go anywhere.
    //   hostname = "10.255.0.100"
    simple-metric-key-generator.application = "cromwell"
  }
}


